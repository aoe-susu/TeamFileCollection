<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>无标题文档</title>
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery1.js"></script>
    <script type="text/javascript">

        $(function () {
            $.ajax({
                url: "getTeam.do",
                data: {},
                type: "POST",
                async: true,
                dataType: "JSON",
                success: function (data) {
                    $("#team").empty();
                    // alert(data);
                    team = data;//JSON.parse(data);
                    var strs = "";
                    for (i in team) {
                        var id = team[i].id;
                        var account = team[i].account;
                        var name = team[i].name;
                        var introduction = team[i].introduction;
                        var iconUrl = team[i].iconUrl;
                        strs += ' <tr>\n' +
                            '            <td><input name="checkbox" type="checkbox" value=""/></td>\n' +
                            '            <td name="id">' + id + '</td>\n' +
                            '            <td name="account">' + account + '</td>\n' +
                            '            <td name="name">' + name + '</td>\n' +
                            '            <td>' + introduction + '</td>\n' +
                            '            <td>' + iconUrl + '</td>\n' +
                            '            <td>已审核</td>\n' +
                            '\n' +
                            '            <td><a href="#" name="tablelink" class="tablelink">查看</a> <a href="#" name="delete" class="tablelink">删除</a></td>\n' +
                            '        </tr>';
                    }
                    $("#team").append(strs);
                }
            });

            $.ajax({
                url: "getTotalCount.do",
                data: {},
                type: "POST",
                scriptCharset: 'utf-8',
                success: function (data) {
                    // alert(data + "--------------count-----");
                    $("#count").val(data);
                    $("#count").innerHTML = data;
                    $("#count").innerText = data;
                    $("#count").html(data);
                }
            });
        });

        $(document).ready(function () {
            /* $(".click").click(function () {
                 var name = $(this).attr('name');
                 $(".tip").fadeIn(200, function () {
                     $("[name='tipbtn_t']").click(function () {
                         return true;
                     });
                     $("[name='tipbtn_f']").click(function () {
                         return false;
                     });
                 });
             });*/

            $(".tiptop a").click(function () {
                $(".tip").fadeOut(200);
                $(".tip1").fadeOut(200);
            });

            $(".sure").click(function () {
                $(".tip").fadeOut(100);
                $(".tip1").fadeOut(100);
            });

            $(".cancel").click(function () {
                $(".tip").fadeOut(100);
                $(".tip1").fadeOut(100);
            });

            /* $(".click").on('click', 'li[name="add"]', function () {
                 if(name=="add"){
                            $.ajax({
                                url: "getform.do",
                                data: {},
                                async: true
                            });
                            alert("-------------------------------------------");
                        }
                        if(name=="update"){
                            var checkID = [];
                            $("input[name='checkbox']:checked").each(function (i) {
                                checkID[i] = $(this).parent("tr").find("td[name='id']").val();
                            });
                            var id =checkID[0];
                            $.ajax({
                                url: "getform.do?id="+id,
                                data: {},
                                async: true
                            });

                        }
             });*/

            $(".toolbar").on('click', 'li[name="add"]', function () {
                alert("--------");
                $.ajax({
                    url: "getform.do",
                    type: "POST",
                    async: true,
                    success: function (data) {
                        alert("-----------" + data);
                        if (true == data) {
                            window.location.href = "form.html";
                        } else {
                            window.location.href = "form.html";
                        }
                    }
                });

            })
            $(".toolbar").on('click', 'li[name="update"]', function () {

            });

            $(".tablelist").on('click', "a[name='tablelink']", function () {
                alert("click-------");
                var id = $(this).parents("tr").find("[name='id']").text();
                alert(id);
                $.ajax({
                    url: "getTeamMember.do?id=" + id,
                    data: {},
                    type: "POST",
                    async: true,
                    dataType: "JSON",
                    success: function (data) {
                        $("#team_member").empty();
                        if ((null != data) && ("" != data)) {
                            alert(data + "------data--------");
                            var team = data;
                            var strs = "";
                            /*strs = " <table class=\"tablelist\">\n" +
                                "        <thead>\n" +
                                "        <tr>\n" +
                                "            <th>编号<i class=\"sort\"><img src=\"images/px.gif\"/></i></th>\n" +
                                "            <th>账号</th>\n" +
                                "            <th>团队名</th>\n" +
                                "            <th>图标地址</th>\n" +
                                "        </tr>\n" +
                                "        </thead>" + " <tbody>";*/
                            for (i in data) {
                                var id = team[i].id;
                                var number = team[i].number;
                                var name = team[i].name;
                                var iconUrl = team[i].iconUrl;
                                strs += ' <tr>\n' +
                                    '            <td name="id">' + id + '</td>\n' +
                                    '            <td name="number">' + number + '</td>\n' +
                                    '            <td name="name">' + name + '</td>\n' +
                                    '            <td><img style="width:35px;height=20px;" src="' + iconUrl + '"/></td>\n' +
                                    '\n' +
                                    '        </tr>';
                            }
                            $("#team_member").append(strs);
                        } else {
                            $("#team_member").append(' <tr> <td>' + '该团队还没有成员!' + '</td></tr>');
                        }
                        $(".tip1").fadeIn(200);
                    }
                });
            });

            $(".tablelist").on('click', "a[name='delete']", function () {
                var id = $(this).parents("tr").find("[name='id']").text();
                $(".tip").fadeIn(200, function () {
                    $("[name='tipbtn_t']").click(function () {
                        $.ajax({
                            url: "deleteTeamMember.do?id=" + id,
                            data: {},
                            type: "POST",
                            async: true,
                            dataType: "JSON",
                            success: function (data) {
                                alert(data + "--------data---------");
                                //var parent = $(this).parents("tr");
                                $(this).parent().parent().remove();
                                var t = $(this).parent("tr").remove();
                            }
                        });
                    });
                });
                $(this).parent().parent().remove();
            });

        });

    </script>
</head>
<body>

<div class="place">
    <span>位置：</span>
    <ul class="placeul">
        <li><a href="#">首页</a></li>
        <li><a href="#">数据表</a></li>
        <li><a href="#">基本内容</a></li>
    </ul>
</div>

<div class="rightinfo">

    <div class="tools">

        <ul class="toolbar">
            <li class="click" name="add"><span name="add1"><img src="images/t01.png"/></span>添加</li>
            <li class="click" name="update"><span><img src="images/t02.png"/></span>修改</li>
            <li><span><img src="images/t03.png"/></span>删除</li>
            <li><span><img src="images/t04.png"/></span>统计</li>
        </ul>

        <ul class="toolbar1">
            <li><span><img src="images/t05.png"/></span>设置</li>
        </ul>

    </div>

    <table class="tablelist">
        <thead>
        <tr>
            <th><input name="" type="checkbox" value="" checked=""/></th>
            <th>编号<i class="sort"><img src="images/px.gif"/></i></th>
            <th>账号</th>
            <th>团队名</th>
            <th>团队简介</th>
            <th>图标地址</th>
            <th>是否审核</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody id="team">
        <!-- <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130908</td>
             <td>王金平幕僚：马英九声明字字见血 人活着没意思</td>
             <td>admin</td>
             <td>江苏南京</td>
             <td>2013-09-09 15:05</td>
             <td>已审核</td>

             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink"> 删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130907</td>
             <td>温州19名小学生中毒流鼻血续：周边部分企业关停</td>
             <td>uimaker</td>
             <td>山东济南</td>
             <td>2013-09-08 14:02</td>
             <td>未审核</td>
             <td><a href="#" class="tablelink">查看</a>
                 <a href="#" class="tablelink">删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130906</td>
             <td>社科院:电子商务促进了农村经济结构和社会转型</td>
             <td>user</td>
             <td>江苏无锡</td>
             <td>2013-09-07 13:16</td>
             <td>未审核</td>
             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink">删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130905</td>
             <td>江西&quot;局长违规建豪宅&quot;：局长检讨</td>
             <td>admin</td>
             <td>北京市</td>
             <td>2013-09-06 10:36</td>
             <td>已审核</td>
             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink">删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130904</td>
             <td>中国2020年或迈入高收入国家行列</td>
             <td>uimaker</td>
             <td>江苏南京</td>
             <td>2013-09-05 13:25</td>
             <td>已审核</td>
             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink">删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130903</td>
             <td>深圳地铁车门因乘客拉闸打开 3人被挤入隧道</td>
             <td>user</td>
             <td>广东深圳</td>
             <td>2013-09-04 12:00</td>
             <td>已审核</td>
             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink">删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130902</td>
             <td>33次地表塌陷 村民不敢下地劳作(图)</td>
             <td>admin</td>
             <td>湖南长沙</td>
             <td>2013-09-03 00:05</td>
             <td>未审核</td>
             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink">删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130901</td>
             <td>医患关系：医生在替改革不彻底背黑锅</td>
             <td>admin</td>
             <td>江苏南京</td>
             <td>2013-09-02 15:05</td>
             <td>未审核</td>
             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink">删除</a></td>
         </tr>

         <tr>
             <td><input name="" type="checkbox" value=""/></td>
             <td>20130900</td>
             <td>山东章丘公车进饭店景点将自动向监控系统报警</td>
             <td>uimaker</td>
             <td>山东滨州</td>
             <td>2013-09-01 10:26</td>
             <td>已审核</td>
             <td><a href="#" class="tablelink">查看</a> <a href="#" class="tablelink">删除</a></td>
         </tr>-->
        </tbody>
    </table>

    <div class="pagin">
        <div class="message">共<i id="count" class="blue">1256</i>条记录，当前显示第&nbsp;<i id="currentPage" class="blue">1</i>页
        </div>
        <ul class="paginList">
            <li class="paginItem"><a href="showTeamServlet.do?page="+$('.current').children('a').text()><span class="pagepre"></span></a></li>
            <li id="one" class="paginItem current"><a href="javascript:;">1</a></li>
            <li id="two" class="paginItem "><a href="javascript:;">2</a></li>
            <li id="three" class="paginItem"><a href="javascript:;">3</a></li>
            <li id="four" class="paginItem"><a href="javascript:;">4</a></li>
            <li id="five" class="paginItem"><a href="javascript:;">5</a></li>
            <li id="six" class="paginItem more"><a href="javascript:;">...</a></li>
            <li id="seven" class="paginItem"><a href="javascript:;">10</a></li>
            <li id="eight" class="paginItem"><a href="javascript:;"><span class="pagenxt"></span></a></li>
        </ul>
    </div>

    <div class="tip">
        <div class="tiptop"><span>提示信息</span><a></a></div>
        <div class="tipinfo">
            <span><img src="images/ticon.png"/></span>
            <div class="tipright">
                <p>是否确认对信息的修改 ？</p>
                <cite>如果是请点击确定按钮 ，否则请点取消。</cite>
            </div>
        </div>

        <div class="tipbtn">
            <input name="tipbtn_t" type="button" class="sure" value="确定"/>&nbsp;
            <input name="tipbtn_f" type="button" class="cancel" value="取消"/>
        </div>
    </div>

    <div class="tip1" id="list">
        <div class="tiptop"><span>团队中成员信息</span><a></a></div>
        <div class="tipinfo1">
            <table class="tablelist">
                <thead>
                <tr>
                    <th>编号<i class="sort"><img src="images/px.gif"/></i></th>
                    <th>账号</th>
                    <th>队员名称</th>
                    <th>图标地址</th>
                </tr>
                </thead>
                <tbody id="team_member">
                </tbody>
                <tfoot></tfoot>
            </table>
        </div>
        <div class="tipbtn">
            <input name="tipbtn_t" type="button" class="sure" value="确定"/>
        </div>
    </div>
</div>

<script type="text/javascript">
    $('.tablelist tbody tr:odd').addClass('odd');
</script>

</body>

</html>
